# Telegram_Web_App_Erosia

# üõçÔ∏è Telegram –ë–æ—Ç + Mini App (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω)

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç mini app ‚Äî React-–º–∞–≥–∞–∑–∏–Ω —Å –æ–ø–ª–∞—Ç–æ–π —á–µ—Ä–µ–∑ –°–ë–ü, –∫–æ—Ä–∑–∏–Ω–æ–π, –ü–í–ó, –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–æ–π –∑–∞–∫–∞–∑–æ–≤ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é —á–µ—Ä–µ–∑ Telegram.



## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** ‚Äî backend API
- **React** ‚Äî –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram (WebApp)
- **Telegram Bot API** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º
- **JSON-—Ñ–∞–π–ª—ã** ‚Äî –≤–º–µ—Å—Ç–æ –ë–î:
    - `products.json` ‚Äî –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
    - `orders.json` ‚Äî –∑–∞–∫–∞–∑—ã



## üîÅ –°—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç—ã

### 1. –°—Ç–∞—Ä—Ç

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç `/start`
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏:
    - üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω
    - ‚ÑπÔ∏è –û –Ω–∞—Å
    - ‚ùì –ü–æ–º–æ—â—å



### 2. –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (WebApp)

- –ü–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ **‚Äú–ú–∞–≥–∞–∑–∏–Ω‚Äù** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è React mini app
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã (`GET /api/products`)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç ‚Äú–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É‚Äù ‚Üí –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–∑–∏–Ω–∞
- –ù–∞–∂–∏–º–∞–µ—Ç **‚Äú–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑‚Äù** ‚Üí —Ñ–æ—Ä–º–∞:
    - –§–ò–û
    - –¢–µ–ª–µ—Ñ–æ–Ω
    - –ü–í–ó –°–î–≠–ö
- –ö–Ω–æ–ø–∫–∞ **‚Äú–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ‚Äù** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /api/create-order`



### 3. Backend

- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–∫–∞–∑ –≤ `orders.json`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ –°–ë–ü
- –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–ª—É—á–∞–µ—Ç `webhook` –æ—Ç –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- –û—Ç–º–µ—á–∞–µ—Ç –∑–∞–∫–∞–∑ –∫–∞–∫ –æ–ø–ª–∞—á–µ–Ω
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑ –≤ Telegram –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é



### 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é

–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:

```
üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!

üë§ –§–ò–û: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω
üì± –¢–µ–ª–µ—Ñ–æ–Ω: +79123456789
üìç –ü–í–ó: –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 5
üîó Telegram: @ivan_user

üì¶ –¢–æ–≤–∞—Ä—ã:
- –ö—Ä—É–∂–∫–∞ √ó2 ‚Äî 1200 ‚ÇΩ

üí≥ –û–ø–ª–∞—Ç–∞: –£—Å–ø–µ—à–Ω–æ —á–µ—Ä–µ–∑ –°–ë–ü
```



### 5. –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` ‚Äî —Å—Ç–∞—Ä—Ç, –∫–Ω–æ–ø–∫–∏
- `/help` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- **–ö–Ω–æ–ø–∫–∞ ‚Äú–û –Ω–∞—Å‚Äù** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
- **–ö–Ω–æ–ø–∫–∞ ‚Äú–ü–æ–º–æ—â—å‚Äù** ‚Äî –±–æ—Ç –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é



## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### `products.json`

```json
[  {    "id": 1,    "name": "–ö—Ä—É–∂–∫–∞",    "price": 600,    "description": "–ë–µ–ª–∞—è –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∞—è –∫—Ä—É–∂–∫–∞ 350 –º–ª",    "image": "https://example.com/mug.jpg"  }]
```

### `orders.json`

```json
[  {    "id": "ORDER123",    "user_id": 123456789,    "username": "@ivan_user",    "fio": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",    "phone": "+79123456789",    "pickup_point": "–ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, –¥. 5",    "items": [      { "id": 1, "name": "–ö—Ä—É–∂–∫–∞", "qty": 2, "price": 600 }    ],    "total": 1200,    "paid": true  }]
```



## ‚úÖ –ó–∞–¥–∞—á–∏ –ø–æ —Ä–æ–ª—è–º

### Backend (Node.js):

- [ ]  –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/products`, `/api/create-order`, `/api/payment-callback`
- [ ]  –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–∞–∫–∞–∑—ã –≤ `orders.json`
- [ ]  –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç—ë–∂–∫–æ–π (–°–ë–ü)
- [ ]  –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram

### Frontend (React Mini App):

- [ ]  –ö–∞—Ç–∞–ª–æ–≥, –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- [ ]  –ö–æ—Ä–∑–∏–Ω–∞
- [ ]  –§–æ—Ä–º–∞: –§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω, –ü–í–ó
- [ ]  –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ backend
- [ ]  –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã

### Telegram –ë–æ—Ç:

- [ ]  –ö–Ω–æ–ø–∫–∏: –ú–∞–≥–∞–∑–∏–Ω (WebApp), –û –Ω–∞—Å, –ü–æ–º–æ—â—å
- [ ]  –û–±—Ä–∞–±–æ—Ç–∫–∞ `/start`, `/help`
- [ ]  –ü–µ—Ä–µ—Å—ã–ª–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º



## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –î–ª—è –≤—ã–±–æ—Ä–∞ –ü–í–ó –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å [CDEK Widget](https://cdek.click/)
- –í–º–µ—Å—Ç–æ –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ ‚Äî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è MVP



## üì¶ –ü—Ä–∏–º–µ—Ä –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```mermaid
sequenceDiagram
    participant User
    participant Bot
    participant MiniApp
    participant Backend
    participant Payment
    participant Executor

    User->>Bot: /start
    Bot->>User: –ö–Ω–æ–ø–∫–∏ (–ú–∞–≥–∞–∑–∏–Ω, –û –Ω–∞—Å, –ü–æ–º–æ—â—å)
    User->>Bot: –ù–∞–∂–∏–º–∞–µ—Ç –ú–∞–≥–∞–∑–∏–Ω
    Bot->>MiniApp: –û—Ç–∫—Ä—ã—Ç–∏–µ WebApp
    MiniApp->>Backend: GET /api/products
    MiniApp->>User: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
    User->>MiniApp: –î–æ–±–∞–≤–ª—è–µ—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É
    User->>MiniApp: –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∑–∞–∫–∞–∑–∞
    MiniApp->>Backend: POST /api/create-order
    Backend->>orders.json: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–∫–∞–∑
    Backend->>User: –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
    User->>Payment: –û–ø–ª–∞—Ç–∞
    Payment->>Backend: Webhook ‚Üí –æ–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–∞
    Backend->>orders.json: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
    Backend->>Executor: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –≤ Telegram
```



## **ü™¥PlantUML**

```jsx
@startuml
start

:–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ (/start);
:–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏: –ú–∞–≥–∞–∑–∏–Ω, –û –Ω–∞—Å, –ü–æ–º–æ—â—å;

if (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ú–∞–≥–∞–∑–∏–Ω") then (–¥–∞)
  :–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Mini App (React);
  :–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–≤–∞—Ä—ã –∏–∑ products.json;

  if (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É") then (–¥–∞)
    :–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä–∑–∏–Ω–∞;
    :–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑";
    :–í–≤–æ–¥–∏—Ç –§–ò–û, –¢–µ–ª–µ—Ñ–æ–Ω, –ü–í–ó –°–î–≠–ö;
    :–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ backend (/api/create-order);
    :–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ orders.json;
    :–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É –°–ë–ü;
    :–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ–ø–ª–∞—Ç—É;

      if (–û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–∞) then (–¥–∞)
        :Webhook –æ—Ç –°–ë–ü ‚Üí backend;
        :–ü–æ–º–µ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞ –∫–∞–∫ "–æ–ø–ª–∞—á–µ–Ω";
        :–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∑–∞–∫–∞–∑–∞;
        :–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –≤ Telegram;
      else (–Ω–µ—Ç)
        :–ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –æ–ø–ª–∞—Ç—ã;
      endif

  else (–Ω–µ—Ç)
    :–û–∂–∏–¥–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞;
  endif

else (–¥—Ä—É–≥–∏–µ –∫–Ω–æ–ø–∫–∏)
  if (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û –Ω–∞—Å") then (–¥–∞)
    :–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞;
  else if (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–æ–º–æ—â—å") then (–¥–∞)
    :–ë–æ—Ç –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ;
    :–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç;
    :–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ —á–∞—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è;
  endif
endif

stop
@enduml
```
